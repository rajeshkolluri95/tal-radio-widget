"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const t=require("react/jsx-runtime"),s=require("react"),l=require("firebase/database"),j=require("firebase/app"),L=require("firebase/storage"),Y=require("firebase/firestore");function V(n){const a=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(n){for(const r in n)if(r!=="default"){const i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(a,r,i.get?i:{enumerable:!0,get:()=>n[r]})}}return a.default=n,Object.freeze(a)}const B=V(s),O=n=>s.useMemo(()=>{if(!(n!=null&&n.apiKey))throw new Error("Missing Firebase configuration");const r=j.getApps().length?j.getApp():j.initializeApp(n),i=l.getDatabase(r),g=L.getStorage(r),c=l.getDatabase(r),d=Y.getFirestore(r);return console.log("✅ Firebase initialized:",r.name),{app:r,database:i,storage:g,realtimeDb:c,firestoreDb:d}},[n]),q="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='lucide%20lucide-music-icon%20lucide-music'%3e%3cpath%20d='M9%2018V5l12-2v13'/%3e%3ccircle%20cx='6'%20cy='18'%20r='3'/%3e%3ccircle%20cx='18'%20cy='16'%20r='3'/%3e%3c/svg%3e",P="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='lucide%20lucide-pause-icon%20lucide-pause'%3e%3crect%20x='14'%20y='3'%20width='5'%20height='18'%20rx='1'/%3e%3crect%20x='5'%20y='3'%20width='5'%20height='18'%20rx='1'/%3e%3c/svg%3e",G="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='lucide%20lucide-play-icon%20lucide-play'%3e%3cpath%20d='M5%205a2%202%200%200%201%203.008-1.728l11.997%206.998a2%202%200%200%201%20.003%203.458l-12%207A2%202%200%200%201%205%2019z'/%3e%3c/svg%3e",X="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='lucide%20lucide-volume2-icon%20lucide-volume-2'%3e%3cpath%20d='M11%204.702a.705.705%200%200%200-1.203-.498L6.413%207.587A1.4%201.4%200%200%201%205.416%208H3a1%201%200%200%200-1%201v6a1%201%200%200%200%201%201h2.416a1.4%201.4%200%200%201%20.997.413l3.383%203.384A.705.705%200%200%200%2011%2019.298z'/%3e%3cpath%20d='M16%209a5%205%200%200%201%200%206'/%3e%3cpath%20d='M19.364%2018.364a9%209%200%200%200%200-12.728'/%3e%3c/svg%3e",W="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='lucide%20lucide-volume-x-icon%20lucide-volume-x'%3e%3cpath%20d='M11%204.702a.705.705%200%200%200-1.203-.498L6.413%207.587A1.4%201.4%200%200%201%205.416%208H3a1%201%200%200%200-1%201v6a1%201%200%200%200%201%201h2.416a1.4%201.4%200%200%201%20.997.413l3.383%203.384A.705.705%200%200%200%2011%2019.298z'/%3e%3cline%20x1='22'%20x2='16'%20y1='9'%20y2='15'/%3e%3cline%20x1='16'%20x2='22'%20y1='9'%20y2='15'/%3e%3c/svg%3e",H=n=>B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-radio-icon lucide-radio",...n},B.createElement("path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478"}),B.createElement("path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134"}),B.createElement("path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134"}),B.createElement("path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478"}),B.createElement("circle",{cx:12,cy:12,r:2}));async function Z(n=!1){try{const a=await fetch(`https://touch-a-life-dev.web.app/api/v1/talradio/channels?includeAll=${n}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!a.ok)throw new Error(`HTTP error! Status: ${a.status}`);return await a.json()}catch(a){throw console.error("Error fetching channels:",a),a}}function D(n=null){switch(n){case"telugu":return"telugu";case"hindi":return"hindi";case"talradio":return"english";case"kannada":return"kannada";default:return"all"}}const J="data:image/jpeg;base64,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",$=({src:n,fallback:a=J,alt:r="image",className:i,style:g})=>{const[c,d]=s.useState(n||a),[v,h]=s.useState(!1);s.useEffect(()=>{n?(d(n),h(!1)):d(a)},[n,a]);const f=()=>{c!==a&&d(a)};return t.jsx("img",{src:c,alt:r,onError:f,onLoad:()=>h(!0),className:`${i||""} ${v?"opacity-100":"opacity-0"} transition-opacity duration-500`,style:g,loading:"lazy"})},_=()=>{const[n,a]=s.useState(new Date().getSeconds()),[r,i]=s.useState(new Date);s.useEffect(()=>{const m=setInterval(()=>{const w=new Date;a(w.getSeconds()),w.getSeconds()===0&&i(w)},1e3);return()=>clearInterval(m)},[]);const g=s.useMemo(()=>r.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}),[r]),c=s.useMemo(()=>r.toLocaleDateString("en-US",{weekday:"short",day:"2-digit",month:"short",year:"numeric"}),[r]),[d,v]=g.split(" "),[h,f]=d.split(":");return t.jsxs("div",{className:"flex justify-between items-center mt-2 text-[11px] text-gray-500 font-mono",children:[t.jsx("span",{children:c}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),t.jsxs("div",{className:"flex items-baseline text-gray-700 font-semibold",children:[t.jsx("span",{children:h}),t.jsx("span",{className:"mx-[2px] text-gray-700 animate-[pulse_2s_ease-in-out_infinite]",style:{animationName:"pulse",animationDuration:"2s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out"},children:":"}),t.jsx("span",{children:f}),t.jsx("span",{children:":"}),t.jsx("span",{className:"ml-1 text-[10px] text-gray-600",children:n.toString().padStart(2,"0")}),t.jsx("span",{className:"ml-1 text-[10px] opacity-80",children:v})]})]}),t.jsx("style",{children:`
          @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.2; }
          }
        `})]})},ee=({firebaseConfig:n})=>{const[a,r]=s.useState(!1),[i,g]=s.useState(null),[c,d]=s.useState([]),[v,h]=s.useState(""),f=s.useRef(null),[m,w]=s.useState(.5),[Q,U]=s.useState(!1),[S,y]=s.useState(!1),[A,b]=s.useState(null),E=s.useRef(null),M=s.useRef(null),N=s.useRef(null),x=s.useRef(null),{realtimeDb:C,database:F}=O(n);s.useEffect(()=>{const e=l.ref(F,"radio/nowPlaying");return l.onValue(e,o=>{console.log("Now playing:",o.val())}),()=>l.off(e)},[F]);const K=e=>{h(D(e)),g(e)},I=async e=>{const o=x.current;if(!o||!(A!=null&&A.downloadUrl))return;o.pause(),o.src!==A.downloadUrl&&(o.src=A.downloadUrl,o.load());const p=()=>{a&&o.play().catch(u=>console.warn("Audio play failed:",u))};if(e)try{const u=l.ref(C,`/seekTime/${i}`),R=await l.get(u);R.exists()&&a&&(o.currentTime=R.val()||0)}catch(u){console.error("Seek fetch error:",u)}else o.currentTime=0;p()};s.useEffect(()=>{const e=x.current;e&&(a?e.play().catch(()=>{}):e.pause())},[a]);const T=e=>{const o=c.find(u=>u.name===e);if(!o)return;const p=l.ref(C,`/currentStreaming/${o.name}`);E.current&&l.off(E.current),l.onValue(p,u=>{u.exists()?b(u.val()):b({title:"Offline",thumbnailUrl:""})}),E.current=p},k=async()=>{try{y(!0);const e=await Z();y(!1),Array.isArray(e==null?void 0:e.data)&&d(e.data)}catch(e){y(!1),console.error("Error fetching channels:",e)}},z=()=>{if(!i&&c.length>0){const e=c.find(o=>o.isDefault);e&&(h(D(e.name)),g(e.name))}};return s.useEffect(()=>{i&&T(i)},[i]),s.useEffect(()=>{k()},[]),s.useEffect(()=>(c.length>0&&z(),()=>{E.current&&l.off(E.current);const e=x.current;e&&e.pause()}),[c]),s.useEffect(()=>{if(!(A!=null&&A.downloadUrl))return;const e=M.current!==i;I(e),M.current=i},[A]),s.useEffect(()=>{x.current&&(x.current.volume=m)},[m]),s.useEffect(()=>{f.current&&f.current.style.setProperty("--fill",`${m*100}%`)},[]),s.useEffect(()=>{const e=o=>{if(a&&N.current&&i){const p=l.ref(C,`/talRadioCurrentListeners/${i}/${N.current}`);l.remove(p).catch(()=>{}),o.preventDefault(),o.returnValue=""}};return window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e)},[a,i]),t.jsxs("div",{className:"tal-radio-container",children:[t.jsx("div",{className:"tal-header",children:t.jsxs("h2",{className:"tal-header-title",children:[t.jsx(H,{className:"h-5 w-5 text-green-500"}),"TALRadio – Listen, Feel and Act!"]})}),t.jsx("div",{className:"tal-channel-box",children:S?t.jsx("div",{className:"text-xs",children:"Loading languages..."}):t.jsx("div",{style:{display:"flex"},children:["talradio","hindi","telugu","kannada"].map(e=>t.jsx("button",{onClick:()=>K(e),className:`tal-channel-btn ${i===e?"active":""}`,children:e==="talradio"?"English":e.charAt(0).toUpperCase()+e.slice(1)},e))})}),t.jsxs("h3",{className:"tal-title",children:[t.jsx("img",{src:q}),t.jsx("span",{children:(A==null?void 0:A.title)||"Now Playing"})]}),t.jsxs("div",{className:"tal-main",children:[t.jsxs("div",{className:"tal-thumb",children:[t.jsx($,{src:A==null?void 0:A.thumbnailUrl}),a&&t.jsx("div",{className:"tal-equalizer",children:[0,1,2,3].map(e=>t.jsx("div",{style:{animationDelay:`${e*.15}s`}},e))})]}),t.jsxs("div",{className:"tal-details",children:[t.jsxs("p",{className:"tal-meta",children:["Producer: ",(A==null?void 0:A.producer)||"Unknown"]}),t.jsxs("p",{className:"tal-meta",children:["RJ: ",(A==null?void 0:A.rjUserId)||"Unknown"]}),t.jsxs("div",{className:"tal-controls",children:[a?t.jsx("button",{onClick:()=>r(!1),className:"tal-btn pause",children:t.jsx("img",{src:P})}):t.jsx("button",{onClick:()=>r(!0),className:"tal-btn play",children:t.jsx("img",{src:G})}),t.jsx("button",{onClick:()=>U(!Q),className:"tal-mute-btn",children:t.jsx("img",{src:Q?W:X})}),t.jsx("input",{ref:f,type:"range",min:0,max:1,step:.01,value:m,onChange:e=>{const o=parseFloat(e.target.value);w(o),e.target.style.setProperty("--fill",`${o*100}%`)},className:"custom-volume-slider"})]}),t.jsx(_,{})]})]}),t.jsx("audio",{ref:x,muted:Q,preload:"auto",loop:!0})]})};exports.LiveRadioWidget=ee;
//# sourceMappingURL=index.cjs.js.map

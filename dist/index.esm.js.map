{"version":3,"file":"index.esm.js","sources":["../src/firebaseConfig.tsx","../src/radio/assets/music.svg","../src/radio/assets/pause.svg","../src/radio/assets/play.svg","../src/radio/assets/volume-2.svg","../src/radio/assets/volume-x.svg","../src/radio/assets/radio.svg?react","../src/radio/apis/index.ts","../src/radio/utils/index.ts","../src/radio/assets/default_playlist.jpg","../src/radio/ui/safe-image.tsx","../src/radio/ui/live-clock.tsx","../src/radio/RadioWidget.tsx"],"sourcesContent":["import { useMemo } from \"react\";\r\nimport { initializeApp, getApps, getApp, type FirebaseApp } from \"firebase/app\";\r\nimport { getDatabase, Database } from \"firebase/database\";\r\nimport { getStorage, type FirebaseStorage } from \"firebase/storage\";\r\nimport { getFirestore, type Firestore } from \"firebase/firestore\"\r\n\r\nexport interface FirebaseConfig {\r\n  apiKey: string;\r\n  authDomain: string;\r\n  databaseURL?: string;\r\n  projectId: string;\r\n  storageBucket?: string;\r\n  messagingSenderId?: string;\r\n  appId: string;\r\n}\r\n\r\nexport interface FirebaseInstances {\r\n  app: FirebaseApp;\r\n  database: Database;\r\n  storage: FirebaseStorage;\r\n}\r\n\r\nexport const firebaseConfig: {\r\n  apiKey: string;\r\n  authDomain: string;\r\n  databaseURL: string;\r\n  projectId: string;\r\n  storageBucket: string;\r\n  messagingSenderId: string;\r\n  appId: string;\r\n  measurementId: string;\r\n} = {\r\n  apiKey: import.meta.env.VITE_PUBLIC_FIREBASE_API_KEY,\r\n  authDomain: import.meta.env.VITE_PUBLIC_FIREBASE_AUTH_DOMAIN,\r\n  databaseURL: import.meta.env.VITE_PUBLIC_FIREBASE_DATABASE_URL,\r\n  projectId: import.meta.env.VITE_PUBLIC_FIREBASE_PROJECT_ID,\r\n  storageBucket: import.meta.env.VITE_PUBLIC_FIREBASE_STORAGE_BUCKET,\r\n  messagingSenderId: import.meta.env.VITE_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\r\n  appId: import.meta.env.VITE_PUBLIC_FIREBASE_APP_ID,\r\n  measurementId: import.meta.env.VITE_PUBLIC_FIREBASE_MEASUREMENT_ID,\r\n};\r\n\r\nexport const useFirebaseServices = (config: FirebaseConfig): FirebaseInstances & { realtimeDb: Database; firestoreDb: Firestore } => {\r\n  const firebaseInstances = useMemo(() => {\r\n    if (!config?.apiKey) {\r\n      throw new Error(\"Missing Firebase configuration\");\r\n    }\r\n\r\n    // âœ… Ensure Firebase app initializes only once\r\n    const app = getApps().length ? getApp() : initializeApp(config);\r\n    const database = getDatabase(app);\r\n    const storage = getStorage(app);\r\n    const realtimeDb = getDatabase(app);\r\n    const firestoreDb = getFirestore(app);\r\n\r\n    console.log(\"âœ… Firebase initialized:\", app.name);\r\n\r\n    return { app, database, storage ,realtimeDb,firestoreDb};\r\n  }, [config]);\r\n\r\n  return firebaseInstances;\r\n};\r\n","export default \"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='lucide%20lucide-music-icon%20lucide-music'%3e%3cpath%20d='M9%2018V5l12-2v13'/%3e%3ccircle%20cx='6'%20cy='18'%20r='3'/%3e%3ccircle%20cx='18'%20cy='16'%20r='3'/%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='lucide%20lucide-pause-icon%20lucide-pause'%3e%3crect%20x='14'%20y='3'%20width='5'%20height='18'%20rx='1'/%3e%3crect%20x='5'%20y='3'%20width='5'%20height='18'%20rx='1'/%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='lucide%20lucide-play-icon%20lucide-play'%3e%3cpath%20d='M5%205a2%202%200%200%201%203.008-1.728l11.997%206.998a2%202%200%200%201%20.003%203.458l-12%207A2%202%200%200%201%205%2019z'/%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='lucide%20lucide-volume2-icon%20lucide-volume-2'%3e%3cpath%20d='M11%204.702a.705.705%200%200%200-1.203-.498L6.413%207.587A1.4%201.4%200%200%201%205.416%208H3a1%201%200%200%200-1%201v6a1%201%200%200%200%201%201h2.416a1.4%201.4%200%200%201%20.997.413l3.383%203.384A.705.705%200%200%200%2011%2019.298z'/%3e%3cpath%20d='M16%209a5%205%200%200%201%200%206'/%3e%3cpath%20d='M19.364%2018.364a9%209%200%200%200%200-12.728'/%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='lucide%20lucide-volume-x-icon%20lucide-volume-x'%3e%3cpath%20d='M11%204.702a.705.705%200%200%200-1.203-.498L6.413%207.587A1.4%201.4%200%200%201%205.416%208H3a1%201%200%200%200-1%201v6a1%201%200%200%200%201%201h2.416a1.4%201.4%200%200%201%20.997.413l3.383%203.384A.705.705%200%200%200%2011%2019.298z'/%3e%3cline%20x1='22'%20x2='16'%20y1='9'%20y2='15'/%3e%3cline%20x1='16'%20x2='22'%20y1='9'%20y2='15'/%3e%3c/svg%3e\"","import * as React from \"react\";\nconst SvgRadio = (props) => /* @__PURE__ */ React.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: 24, height: 24, viewBox: \"0 0 24 24\", fill: \"none\", stroke: \"currentColor\", strokeWidth: 2, strokeLinecap: \"round\", strokeLinejoin: \"round\", className: \"lucide lucide-radio-icon lucide-radio\", ...props }, /* @__PURE__ */ React.createElement(\"path\", { d: \"M16.247 7.761a6 6 0 0 1 0 8.478\" }), /* @__PURE__ */ React.createElement(\"path\", { d: \"M19.075 4.933a10 10 0 0 1 0 14.134\" }), /* @__PURE__ */ React.createElement(\"path\", { d: \"M4.925 19.067a10 10 0 0 1 0-14.134\" }), /* @__PURE__ */ React.createElement(\"path\", { d: \"M7.753 16.239a6 6 0 0 1 0-8.478\" }), /* @__PURE__ */ React.createElement(\"circle\", { cx: 12, cy: 12, r: 2 }));\nexport default SvgRadio;\n","export async function getChannels(includeAll = false) {\r\n  try {\r\n    const response = await fetch(\r\n      `${import.meta.env.VITE_API_BASE_URL}/talradio/channels?includeAll=${includeAll}`,\r\n      {\r\n        method: \"GET\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      }\r\n    );\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`HTTP error! Status: ${response.status}`);\r\n    }\r\n\r\n    const data = await response.json();\r\n    return data;\r\n  } catch (error) {\r\n    console.error(\"Error fetching channels:\", error);\r\n    throw error;\r\n  }\r\n}\r\n","export function checkDefaultChannel(\r\n  currentChannel: string | null = null\r\n): string {\r\n  switch (currentChannel) {\r\n    case \"telugu\":\r\n      return \"telugu\";\r\n    case \"hindi\":\r\n      return \"hindi\";\r\n    case \"talradio\":\r\n      return \"english\";\r\n    case \"kannada\":\r\n      return \"kannada\";\r\n    default:\r\n      return \"all\";\r\n  }\r\n}","export default \"data:image/jpeg;base64,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\"","import React, { useState, useEffect } from \"react\";\r\nimport playlistItemImage from \"../assets/default_playlist.jpg\" // âœ… imported fallback image\r\n\r\ninterface SafeImageProps {\r\n  src?: string;\r\n  fallback?: string;\r\n  alt?: string;\r\n  className?: string;\r\n  style?: React.CSSProperties;\r\n}\r\n\r\nconst SafeImage: React.FC<SafeImageProps> = ({\r\n  src,\r\n  fallback = playlistItemImage, // âœ… use imported default image\r\n  alt = \"image\",\r\n  className,\r\n  style,\r\n}) => {\r\n  const [imgSrc, setImgSrc] = useState(src || fallback);\r\n  const [loaded, setLoaded] = useState(false);\r\n\r\n  // Update when src changes\r\n  useEffect(() => {\r\n    if (src) {\r\n      setImgSrc(src);\r\n      setLoaded(false);\r\n    } else {\r\n      setImgSrc(fallback);\r\n    }\r\n  }, [src, fallback]);\r\n\r\n  const handleError = () => {\r\n    if (imgSrc !== fallback) {\r\n      setImgSrc(fallback);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <img\r\n      src={imgSrc}\r\n      alt={alt}\r\n      onError={handleError}\r\n      onLoad={() => setLoaded(true)}\r\n      className={`${className || \"\"} ${\r\n        loaded ? \"opacity-100\" : \"opacity-0\"\r\n      } transition-opacity duration-500`}\r\n      style={style}\r\n      loading=\"lazy\"\r\n    />\r\n  );\r\n};\r\n\r\nexport default SafeImage;\r\n","import React, { useState, useEffect, useMemo } from \"react\";\r\n\r\nconst LiveClock: React.FC = () => {\r\n  const [seconds, setSeconds] = useState<number>(new Date().getSeconds());\r\n  const [baseTime, setBaseTime] = useState<Date>(new Date());\r\n\r\n  // Update every second\r\n  useEffect(() => {\r\n    const timer = setInterval(() => {\r\n      const now = new Date();\r\n      setSeconds(now.getSeconds());\r\n\r\n      // Update the base time every minute (to refresh hours/minutes)\r\n      if (now.getSeconds() === 0) {\r\n        setBaseTime(now);\r\n      }\r\n    }, 1000);\r\n\r\n    return () => clearInterval(timer);\r\n  }, []);\r\n\r\n  // Format time and date â€” memoized to avoid recomputation\r\n  const formattedTime = useMemo(\r\n    () =>\r\n      baseTime.toLocaleTimeString(\"en-US\", {\r\n        hour: \"2-digit\",\r\n        minute: \"2-digit\",\r\n        hour12: true,\r\n      }),\r\n    [baseTime]\r\n  );\r\n\r\n  const formattedDate = useMemo(\r\n    () =>\r\n      baseTime.toLocaleDateString(\"en-US\", {\r\n        weekday: \"short\",\r\n        day: \"2-digit\",\r\n        month: \"short\",\r\n        year: \"numeric\",\r\n      }),\r\n    [baseTime]\r\n  );\r\n\r\n  // Extract hour, minute, and AM/PM\r\n  const [hourMinute, period] = formattedTime.split(\" \");\r\n  const [hours, minutes] = hourMinute.split(\":\");\r\n\r\n  return (\r\n    <div className=\"flex justify-between items-center mt-2 text-[11px] text-gray-500 font-mono\">\r\n      {/* Left: Date */}\r\n      <span>{formattedDate}</span>\r\n\r\n      {/* Right: Clock */}\r\n      <div className=\"flex items-center gap-1\">\r\n        {/* ðŸ”´ Live indicator */}\r\n        <span className=\"w-2 h-2 bg-red-500 rounded-full animate-pulse\"></span>\r\n\r\n        {/* Time display */}\r\n        <div className=\"flex items-baseline text-gray-700 font-semibold\">\r\n          <span>{hours}</span>\r\n\r\n          {/* Smooth pulsing colon */}\r\n          <span\r\n            className=\"mx-[2px] text-gray-700 animate-[pulse_2s_ease-in-out_infinite]\"\r\n            style={{\r\n              animationName: \"pulse\",\r\n              animationDuration: \"2s\",\r\n              animationIterationCount: \"infinite\",\r\n              animationTimingFunction: \"ease-in-out\",\r\n            }}\r\n          >\r\n            :\r\n          </span>\r\n\r\n          <span>{minutes}</span>\r\n          <span>:</span>\r\n          {/* Seconds */}\r\n          <span className=\"ml-1 text-[10px] text-gray-600\">\r\n            {seconds.toString().padStart(2, \"0\")}\r\n          </span>\r\n          {/* AM/PM */}\r\n          <span className=\"ml-1 text-[10px] opacity-80\">{period}</span>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Keyframes for smooth colon fade */}\r\n      <style>\r\n        {`\r\n          @keyframes pulse {\r\n            0%, 100% { opacity: 1; }\r\n            50% { opacity: 0.2; }\r\n          }\r\n        `}\r\n      </style>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LiveClock;\r\n","\"use client\";\r\n\r\nimport React, { useState, useEffect, useRef, ChangeEvent } from \"react\";\r\nimport {\r\n    ref,\r\n    onValue,\r\n    off,\r\n    get,\r\n    remove,\r\n    DatabaseReference,\r\n} from \"firebase/database\";\r\nimport { useFirebaseServices } from \"../firebaseConfig\";\r\n\r\nimport Music from \"./assets/music.svg\";\r\nimport Pause from \"./assets/pause.svg\";\r\nimport Play from \"./assets/play.svg\";\r\nimport Volume2 from \"./assets/volume-2.svg\";\r\nimport VolumeX from \"./assets/volume-x.svg\";\r\nimport Radio from \"./assets/radio.svg?react\";\r\nimport { getChannels } from \"./apis\";\r\nimport { checkDefaultChannel } from \"./utils\";\r\nimport SafeImage from \"./ui/safe-image\";\r\nimport LiveClock from \"./ui/live-clock\";\r\nimport \"./RadioWidget.css\";\r\n\r\ninterface Channel {\r\n    _id: string;\r\n    name: string;\r\n    isDefault?: boolean;\r\n    isLive?: boolean;\r\n    voiceCommandLabel?: string;\r\n}\r\n\r\ninterface StreamingData {\r\n    title?: string;\r\n    thumbnailUrl?: string;\r\n    downloadUrl?: string;\r\n    rjUserId?: string;\r\n    producer?: string;\r\n}\r\n\r\ninterface AudioProps {\r\n    firebaseConfig: any;\r\n    ShowLiveChannelsOnly?: boolean;\r\n    match?: {\r\n        params?: {\r\n            defaultChannel?: string;\r\n        };\r\n    };\r\n}\r\n\r\nconst LiveRadioWidget: React.FC<AudioProps> = ({ firebaseConfig }) => {\r\n    const [isPlaying, setIsPlaying] = useState(false);\r\n    const [channel, setChannel] = useState<string | null>(null);\r\n    const [channels, setChannels] = useState<Channel[]>([]);\r\n    const [talmediaLanguage, setTalmediaLanguage] = useState(\"\");\r\n    const sliderRef = useRef<HTMLInputElement | null>(null);\r\n\r\n    const [volume, setVolume] = useState(0.5);\r\n    const [mute, setMute] = useState(false);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n\r\n    const [currentStreaming, setCurrentStreaming] =\r\n        useState<StreamingData | null>(null);\r\n\r\n    const previousCurrentStreamingRef = useRef<DatabaseReference | null>(null);\r\n    const previousChannelRef = useRef<string | null>(null);\r\n    const listenerIdRef = useRef<string | null>(null);\r\n\r\n    const audioRef = useRef<HTMLAudioElement | null>(null);\r\n\r\n    const { realtimeDb, database } = useFirebaseServices(firebaseConfig);\r\n\r\n    // ----------------------------\r\n    // GLOBAL NOW PLAYING LOG\r\n    // ----------------------------\r\n    useEffect(() => {\r\n        const dataRef = ref(database, \"radio/nowPlaying\");\r\n        const unsub = onValue(dataRef, (snapshot) => {\r\n            console.log(\"Now playing:\", snapshot.val());\r\n        });\r\n\r\n        return () => off(dataRef);\r\n    }, [database]);\r\n\r\n    // ----------------------------\r\n    // CHANGE CHANNEL\r\n    // ----------------------------\r\n    const handleChangeChannel = (newChannel: string | null) => {\r\n        setTalmediaLanguage(checkDefaultChannel(newChannel));\r\n        setChannel(newChannel);\r\n    };\r\n\r\n    // ----------------------------\r\n    // LOAD + PLAY STREAMING WITH SEEK\r\n    // ----------------------------\r\n    const fetchAudioAndPlay = async (playFromSeek: boolean) => {\r\n        const audio = audioRef.current;\r\n        if (!audio || !currentStreaming?.downloadUrl) return;\r\n\r\n        audio.pause();\r\n\r\n        if (audio.src !== currentStreaming.downloadUrl) {\r\n            audio.src = currentStreaming.downloadUrl;\r\n            audio.load();\r\n        }\r\n\r\n        const playAudio = () => {\r\n            if (isPlaying) {\r\n                audio\r\n                    .play()\r\n                    .catch((err) => console.warn(\"Audio play failed:\", err));\r\n            }\r\n        };\r\n\r\n        if (playFromSeek) {\r\n            try {\r\n                const seekRef = ref(realtimeDb, `/seekTime/${channel}`);\r\n                const snapshot = await get(seekRef);\r\n\r\n                if (snapshot.exists() && isPlaying) {\r\n                    audio.currentTime = snapshot.val() || 0;\r\n                }\r\n            } catch (error) {\r\n                console.error(\"Seek fetch error:\", error);\r\n            }\r\n        } else {\r\n            audio.currentTime = 0;\r\n        }\r\n\r\n        playAudio();\r\n    };\r\n\r\n    // ----------------------------\r\n    // PLAY / PAUSE CONTROL\r\n    // ----------------------------\r\n    useEffect(() => {\r\n        const audio = audioRef.current;\r\n        if (!audio) return;\r\n\r\n        isPlaying\r\n            ? audio.play().catch(() => { })\r\n            : audio.pause();\r\n    }, [isPlaying]);\r\n\r\n    // ----------------------------\r\n    // STREAMING LISTENER\r\n    // ----------------------------\r\n    const channelHandler = (channelName: string) => {\r\n        const selected = channels.find((each) => each.name === channelName);\r\n        if (!selected) return;\r\n\r\n        const refPath = ref(\r\n            realtimeDb,\r\n            `/currentStreaming/${selected.name}`\r\n        );\r\n\r\n        if (previousCurrentStreamingRef.current)\r\n            off(previousCurrentStreamingRef.current);\r\n\r\n        onValue(refPath, (snapshot) => {\r\n            if (snapshot.exists()) {\r\n                setCurrentStreaming(snapshot.val());\r\n            } else {\r\n                setCurrentStreaming({\r\n                    title: \"Offline\",\r\n                    thumbnailUrl: \"\",\r\n                });\r\n            }\r\n        });\r\n\r\n        previousCurrentStreamingRef.current = refPath;\r\n    };\r\n\r\n    // ----------------------------\r\n    // LOAD CHANNEL LIST\r\n    // ----------------------------\r\n    const loadChannels = async () => {\r\n        try {\r\n            setIsLoading(true);\r\n            const response = await getChannels();\r\n            setIsLoading(false);\r\n\r\n            if (Array.isArray(response?.data)) {\r\n                setChannels(response.data);\r\n            }\r\n        } catch (err) {\r\n            setIsLoading(false);\r\n            console.error(\"Error fetching channels:\", err);\r\n        }\r\n    };\r\n\r\n    // ----------------------------\r\n    // DEFAULT CHANNEL\r\n    // ----------------------------\r\n    const decideDefaultChannel = () => {\r\n        if (!channel && channels.length > 0) {\r\n            const found = channels.find((ch) => ch.isDefault);\r\n            if (found) {\r\n                setTalmediaLanguage(checkDefaultChannel(found.name));\r\n                setChannel(found.name);\r\n            }\r\n        }\r\n    };\r\n\r\n    // ----------------------------\r\n    // ON CHANNEL CHANGE\r\n    // ----------------------------\r\n    useEffect(() => {\r\n        if (channel) channelHandler(channel);\r\n    }, [channel]);\r\n\r\n    // ----------------------------\r\n    // INITIAL LOAD\r\n    // ----------------------------\r\n    useEffect(() => {\r\n        loadChannels();\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (channels.length > 0) decideDefaultChannel();\r\n\r\n        return () => {\r\n            if (previousCurrentStreamingRef.current)\r\n                off(previousCurrentStreamingRef.current);\r\n\r\n            const audio = audioRef.current;\r\n            if (audio) audio.pause();\r\n        };\r\n    }, [channels]);\r\n\r\n    // ----------------------------\r\n    // ON STREAMING CHANGE â†’ PLAY\r\n    // ----------------------------\r\n    useEffect(() => {\r\n        if (!currentStreaming?.downloadUrl) return;\r\n\r\n        const channelChanged =\r\n            previousChannelRef.current !== channel;\r\n\r\n        fetchAudioAndPlay(channelChanged);\r\n\r\n        previousChannelRef.current = channel;\r\n    }, [currentStreaming]);\r\n\r\n    // ----------------------------\r\n    // VOLUME\r\n    // ----------------------------\r\n    useEffect(() => {\r\n        if (audioRef.current) audioRef.current.volume = volume;\r\n    }, [volume]);\r\n    useEffect(() => {\r\n        if (sliderRef.current) {\r\n            sliderRef.current.style.setProperty(\"--fill\", `${volume * 100}%`);\r\n        }\r\n    }, [])\r\n    // ----------------------------\r\n    // BEFORE UNLOAD â†’ REMOVE LISTENER\r\n    // ----------------------------\r\n    useEffect(() => {\r\n        const handler = (event: BeforeUnloadEvent) => {\r\n            if (isPlaying && listenerIdRef.current && channel) {\r\n                const listenerRef = ref(\r\n                    realtimeDb,\r\n                    `/talRadioCurrentListeners/${channel}/${listenerIdRef.current}`\r\n                );\r\n                remove(listenerRef).catch(() => { });\r\n                event.preventDefault();\r\n                event.returnValue = \"\";\r\n            }\r\n        };\r\n\r\n        window.addEventListener(\"beforeunload\", handler);\r\n        return () => window.removeEventListener(\"beforeunload\", handler);\r\n    }, [isPlaying, channel]);\r\n\r\n    // ----------------------------\r\n    // RENDER\r\n    // ----------------------------\r\n    return (\r\n        // <div className=\"w-full bg-white/30 backdrop-blur-md border border-white/40 rounded-2xl shadow-lg p-6 transition-all duration-300\">\r\n\r\n        //     {/* Header */}\r\n        //     <div className=\"flex items-center justify-between mb-5\">\r\n        //         <h2 className=\"text-sm font-semibold text-gray-800 flex items-center gap-2\">\r\n        //             <Radio className=\"h-5 w-5 text-green-500\" />\r\n        //             TALRadio â€“ Listen, Feel and Act!\r\n        //         </h2>\r\n        //     </div>\r\n\r\n        //     {/* Channel Selector */}\r\n        //     <div className=\"bg-gray-50 border border-gray-200 rounded-lg px-3 py-2 mb-6 flex items-center justify-between\">\r\n        //         {isLoading ? (\r\n        //             <div className=\"w-full text-center text-xs text-gray-500 animate-pulse\">\r\n        //                 Loading languages...\r\n        //             </div>\r\n        //         ) : (\r\n        //             <div className=\"flex gap-2 justify-center px-3\">\r\n        //                 {[\"talradio\", \"hindi\", \"telugu\", \"kannada\"].map((lang) => (\r\n        //                     <button\r\n        //                         key={lang}\r\n        //                         onClick={() => handleChangeChannel(lang)}\r\n        //                         className={`px-3 py-[4px] text-[11px] rounded-full border transition-all duration-200 ${\r\n        //                             channel === lang\r\n        //                                 ? \"bg-purple-600 text-white border-purple-600\"\r\n        //                                 : \"bg-white text-gray-700 border-gray-300 hover:bg-purple-50\"\r\n        //                         }`}\r\n        //                     >\r\n        //                         {lang === \"talradio\"\r\n        //                             ? \"English\"\r\n        //                             : lang.charAt(0).toUpperCase() + lang.slice(1)}\r\n        //                     </button>\r\n        //                 ))}\r\n        //             </div>\r\n        //         )}\r\n        //     </div>\r\n\r\n        //     {/* Main */}\r\n        //     <div className=\"flex flex-col gap-3\">\r\n        //         {/* Title */}\r\n        //         <h3 className=\"flex items-center gap-2 text-[16px] font-semibold text-gray-900 truncate\">\r\n        //             <img src={Music} className=\"h-4 w-4\" />\r\n        //             <span className=\"truncate\">\r\n        //                 {currentStreaming?.title || \"Now Playing\"}\r\n        //             </span>\r\n        //         </h3>\r\n\r\n        //         <div className=\"flex items-center gap-6\">\r\n        //             {/* Thumbnail */}\r\n        //             <div className=\"relative\">\r\n        //                 <SafeImage\r\n        //                     src={currentStreaming?.thumbnailUrl}\r\n        //                     className=\"w-28 h-28 rounded-2xl border object-cover\"\r\n        //                 />\r\n\r\n        //                 {isPlaying && (\r\n        //                     <div className=\"absolute inset-0 bg-black/30 rounded-2xl flex items-center justify-center\">\r\n        //                         <div className=\"flex space-x-1\">\r\n        //                             {[0, 1, 2, 3].map((i) => (\r\n        //                                 <div\r\n        //                                     key={i}\r\n        //                                     className=\"w-1 h-5 bg-purple-400 rounded-full animate-bounce\"\r\n        //                                     style={{ animationDelay: `${i * 0.15}s` }}\r\n        //                                 />\r\n        //                             ))}\r\n        //                         </div>\r\n        //                     </div>\r\n        //                 )}\r\n        //             </div>\r\n\r\n        //             {/* Details */}\r\n        //             <div className=\"flex flex-col flex-1\">\r\n        //                 <p className=\"text-[12px] text-gray-600\">\r\n        //                     Producer: {currentStreaming?.producer || \"Unknown\"}\r\n        //                 </p>\r\n        //                 <p className=\"text-[12px] text-gray-600\">\r\n        //                     RJ: {currentStreaming?.rjUserId || \"Unknown\"}\r\n        //                 </p>\r\n\r\n        //                 <div className=\"flex items-center gap-3 mt-3\">\r\n        //                     {/* Player Buttons */}\r\n        //                     {isPlaying ? (\r\n        //                         <button\r\n        //                             onClick={() => setIsPlaying(false)}\r\n        //                             className=\"w-9 h-9 bg-red-100 text-red-600 rounded-full flex items-center justify-center\"\r\n        //                         >\r\n        //                             <img src={Pause} className=\"w-4 h-4\" />\r\n        //                         </button>\r\n        //                     ) : (\r\n        //                         <button\r\n        //                             onClick={() => setIsPlaying(true)}\r\n        //                             className=\"w-9 h-9 bg-green-100 text-green-600 rounded-full flex items-center justify-center\"\r\n        //                         >\r\n        //                             <img src={Play} className=\"w-4 h-4\" />\r\n        //                         </button>\r\n        //                     )}\r\n\r\n        //                     {/* Mute */}\r\n        //                     <button\r\n        //                         onClick={() => setMute((prev) => !prev)}\r\n        //                         className=\"p-2 rounded-full hover:bg-gray-100\"\r\n        //                     >\r\n        //                         <img\r\n        //                             src={mute ? VolumeX : Volume2}\r\n        //                             className=\"w-4 h-4\"\r\n        //                         />\r\n        //                     </button>\r\n\r\n        //                     {/* Volume Slider */}\r\n        //                     <input\r\n        //                         type=\"range\"\r\n        //                         min={0}\r\n        //                         max={1}\r\n        //                         step={0.01}\r\n        //                         value={volume}\r\n        //                         onChange={(e) => setVolume(parseFloat(e.target.value))}\r\n        //                         className=\"flex-1 custom-volume-slider\"\r\n        //                         style={{\r\n        //                             background: `linear-gradient(90deg, #a855f7 ${\r\n        //                                 volume * 100\r\n        //                             }%, #e5e7eb ${volume * 100}%)`,\r\n        //                         }}\r\n        //                     />\r\n        //                 </div>\r\n\r\n        //                 <LiveClock />\r\n        //             </div>\r\n        //         </div>\r\n        //     </div>\r\n\r\n        //     {/* Hidden Audio */}\r\n        //     <audio ref={audioRef} muted={mute} preload=\"auto\" loop />\r\n        // </div>\r\n\r\n        <div className=\"tal-radio-container\">\r\n\r\n            {/* Header */}\r\n            <div className=\"tal-header\">\r\n                <h2 className=\"tal-header-title\">\r\n                    <Radio className=\"h-5 w-5 text-green-500\" />\r\n                    TALRadio â€“ Listen, Feel and Act!\r\n                </h2>\r\n            </div>\r\n\r\n            {/* Channel Selector */}\r\n            <div className=\"tal-channel-box\">\r\n                {isLoading ? (\r\n                    <div className=\"text-xs\">Loading languages...</div>\r\n                ) : (\r\n                    <div style={{ display: \"flex\" }}>\r\n                        {[\"talradio\", \"hindi\", \"telugu\", \"kannada\"].map((lang) => (\r\n                            <button\r\n                                key={lang}\r\n                                onClick={() => handleChangeChannel(lang)}\r\n                                className={`tal-channel-btn ${channel === lang ? \"active\" : \"\"\r\n                                    }`}\r\n                            >\r\n                                {lang === \"talradio\"\r\n                                    ? \"English\"\r\n                                    : lang.charAt(0).toUpperCase() + lang.slice(1)}\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Title */}\r\n            <h3 className=\"tal-title\">\r\n                <img src={Music} />\r\n                <span>{currentStreaming?.title || \"Now Playing\"}</span>\r\n            </h3>\r\n\r\n            {/* Main */}\r\n            <div className=\"tal-main\">\r\n\r\n                {/* Thumbnail */}\r\n                <div className=\"tal-thumb\">\r\n                    <SafeImage\r\n                        src={currentStreaming?.thumbnailUrl}\r\n                    />\r\n                    {isPlaying && (\r\n                        <div className=\"tal-equalizer\">\r\n                            {[0, 1, 2, 3].map((i) => (\r\n                                <div key={i} style={{ animationDelay: `${i * 0.15}s` }} />\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Details */}\r\n                <div className=\"tal-details\">\r\n                    <p className=\"tal-meta\">\r\n                        Producer: {currentStreaming?.producer || \"Unknown\"}\r\n                    </p>\r\n                    <p className=\"tal-meta\">\r\n                        RJ: {currentStreaming?.rjUserId || \"Unknown\"}\r\n                    </p>\r\n\r\n                    <div className=\"tal-controls\">\r\n                        {isPlaying ? (\r\n                            <button onClick={() => setIsPlaying(false)} className=\"tal-btn pause\">\r\n                                <img src={Pause} />\r\n                            </button>\r\n                        ) : (\r\n                            <button onClick={() => setIsPlaying(true)} className=\"tal-btn play\">\r\n                                <img src={Play} />\r\n                            </button>\r\n                        )}\r\n\r\n                        <button\r\n                            onClick={() => setMute(!mute)}\r\n                            className=\"tal-mute-btn\"\r\n                        >\r\n                            <img src={mute ? VolumeX : Volume2} />\r\n                        </button>\r\n\r\n                        <input\r\n                            ref={sliderRef}\r\n                            type=\"range\"\r\n                            min={0}\r\n                            max={1}\r\n                            step={0.01}\r\n                            value={volume}\r\n                            onChange={(e) => {\r\n                                const v = parseFloat(e.target.value);\r\n                                setVolume(v);\r\n                                e.target.style.setProperty(\"--fill\", `${v * 100}%`);\r\n                            }}\r\n                            className=\"custom-volume-slider\"\r\n                        />\r\n                    </div>\r\n\r\n                    <LiveClock />\r\n                </div>\r\n            </div>\r\n\r\n            <audio ref={audioRef} muted={mute} preload=\"auto\" loop />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default LiveRadioWidget;\r\n"],"names":["useFirebaseServices","config","useMemo","app","getApps","getApp","initializeApp","database","getDatabase","storage","getStorage","realtimeDb","firestoreDb","getFirestore","Music","Pause","Play","Volume2","VolumeX","SvgRadio","props","React","getChannels","includeAll","response","error","checkDefaultChannel","currentChannel","playlistItemImage","SafeImage","src","fallback","alt","className","style","imgSrc","setImgSrc","useState","loaded","setLoaded","useEffect","jsx","LiveClock","seconds","setSeconds","baseTime","setBaseTime","timer","now","formattedTime","formattedDate","hourMinute","period","hours","minutes","jsxs","LiveRadioWidget","firebaseConfig","isPlaying","setIsPlaying","channel","setChannel","channels","setChannels","talmediaLanguage","setTalmediaLanguage","sliderRef","useRef","volume","setVolume","mute","setMute","isLoading","setIsLoading","currentStreaming","setCurrentStreaming","previousCurrentStreamingRef","previousChannelRef","listenerIdRef","audioRef","dataRef","ref","onValue","snapshot","off","handleChangeChannel","newChannel","fetchAudioAndPlay","playFromSeek","audio","playAudio","err","seekRef","get","channelHandler","channelName","selected","each","refPath","loadChannels","decideDefaultChannel","found","ch","channelChanged","handler","event","listenerRef","remove","Radio","lang","i","v"],"mappings":";;;;;;;AA0CO,MAAMA,IAAsB,CAACC,MACRC,EAAQ,MAAM;AACtC,MAAI,EAACD,KAAA,QAAAA,EAAQ;AACX,UAAM,IAAI,MAAM,gCAAgC;AAIlD,QAAME,IAAMC,IAAU,SAASC,EAAA,IAAWC,EAAcL,CAAM,GACxDM,IAAWC,EAAYL,CAAG,GAC1BM,IAAUC,EAAWP,CAAG,GACxBQ,IAAaH,EAAYL,CAAG,GAC5BS,IAAcC,EAAaV,CAAG;AAEpC,iBAAQ,IAAI,2BAA2BA,EAAI,IAAI,GAExC,EAAE,KAAAA,GAAK,UAAAI,GAAU,SAAAE,GAAS,YAAAE,GAAW,aAAAC,EAAA;AAC9C,GAAG,CAACX,CAAM,CAAC,GC1Dba,KAAe,0ZCAfC,KAAe,maCAfC,KAAe,gbCAfC,KAAe,ypBCAfC,KAAe,4oBCCTC,KAAW,CAACC,MAA0B,gBAAAC,EAAM,cAAc,OAAO,EAAE,OAAO,8BAA8B,OAAO,IAAI,QAAQ,IAAI,SAAS,aAAa,MAAM,QAAQ,QAAQ,gBAAgB,aAAa,GAAG,eAAe,SAAS,gBAAgB,SAAS,WAAW,yCAAyC,GAAGD,EAAK,GAAoB,gBAAAC,EAAM,cAAc,QAAQ,EAAE,GAAG,kCAAiC,CAAE,GAAmB,gBAAAA,EAAM,cAAc,QAAQ,EAAE,GAAG,qCAAoC,CAAE,GAAmB,gBAAAA,EAAM,cAAc,QAAQ,EAAE,GAAG,qCAAoC,CAAE,GAAmB,gBAAAA,EAAM,cAAc,QAAQ,EAAE,GAAG,kCAAiC,CAAE,GAAmB,gBAAAA,EAAM,cAAc,UAAU,EAAE,IAAI,IAAI,IAAI,IAAI,GAAG,EAAC,CAAE,CAAC;ACD3uB,eAAsBC,GAAYC,IAAa,IAAO;AACpD,MAAI;AACF,UAAMC,IAAW,MAAM;AAAA,MACrB,wEAAqED,CAAU;AAAA,MAC/E;AAAA,QACE,QAAQ;AAAA,QACR,SAAS;AAAA,UACP,gBAAgB;AAAA,QAAA;AAAA,MAClB;AAAA,IACF;AAGF,QAAI,CAACC,EAAS;AACZ,YAAM,IAAI,MAAM,uBAAuBA,EAAS,MAAM,EAAE;AAI1D,WADa,MAAMA,EAAS,KAAA;AAAA,EAE9B,SAASC,GAAO;AACd,kBAAQ,MAAM,4BAA4BA,CAAK,GACzCA;AAAA,EACR;AACF;ACtBO,SAASC,EACdC,IAAgC,MACxB;AACR,UAAQA,GAAA;AAAA,IACN,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,aAAO;AAAA,IACT;AACE,aAAO;AAAA,EAAA;AAEb;ACfA,MAAAC,KAAe,2/ICWTC,KAAsC,CAAC;AAAA,EAC3C,KAAAC;AAAA,EACA,UAAAC,IAAWH;AAAA;AAAA,EACX,KAAAI,IAAM;AAAA,EACN,WAAAC;AAAA,EACA,OAAAC;AACF,MAAM;AACJ,QAAM,CAACC,GAAQC,CAAS,IAAIC,EAASP,KAAOC,CAAQ,GAC9C,CAACO,GAAQC,CAAS,IAAIF,EAAS,EAAK;AAG1C,SAAAG,EAAU,MAAM;AACd,IAAIV,KACFM,EAAUN,CAAG,GACbS,EAAU,EAAK,KAEfH,EAAUL,CAAQ;AAAA,EAEtB,GAAG,CAACD,GAAKC,CAAQ,CAAC,GAShB,gBAAAU;AAAA,IAAC;AAAA,IAAA;AAAA,MACC,KAAKN;AAAA,MACL,KAAAH;AAAA,MACA,SAVgB,MAAM;AACxB,QAAIG,MAAWJ,KACbK,EAAUL,CAAQ;AAAA,MAEtB;AAAA,MAOI,QAAQ,MAAMQ,EAAU,EAAI;AAAA,MAC5B,WAAW,GAAGN,KAAa,EAAE,IAC3BK,IAAS,gBAAgB,WAC3B;AAAA,MACA,OAAAJ;AAAA,MACA,SAAQ;AAAA,IAAA;AAAA,EAAA;AAGd,GChDMQ,KAAsB,MAAM;AAChC,QAAM,CAACC,GAASC,CAAU,IAAIP,GAAiB,oBAAI,KAAA,GAAO,YAAY,GAChE,CAACQ,GAAUC,CAAW,IAAIT,EAAe,oBAAI,MAAM;AAGzD,EAAAG,EAAU,MAAM;AACd,UAAMO,IAAQ,YAAY,MAAM;AAC9B,YAAMC,wBAAU,KAAA;AAChB,MAAAJ,EAAWI,EAAI,YAAY,GAGvBA,EAAI,WAAA,MAAiB,KACvBF,EAAYE,CAAG;AAAA,IAEnB,GAAG,GAAI;AAEP,WAAO,MAAM,cAAcD,CAAK;AAAA,EAClC,GAAG,CAAA,CAAE;AAGL,QAAME,IAAgB/C;AAAA,IACpB,MACE2C,EAAS,mBAAmB,SAAS;AAAA,MACnC,MAAM;AAAA,MACN,QAAQ;AAAA,MACR,QAAQ;AAAA,IAAA,CACT;AAAA,IACH,CAACA,CAAQ;AAAA,EAAA,GAGLK,IAAgBhD;AAAA,IACpB,MACE2C,EAAS,mBAAmB,SAAS;AAAA,MACnC,SAAS;AAAA,MACT,KAAK;AAAA,MACL,OAAO;AAAA,MACP,MAAM;AAAA,IAAA,CACP;AAAA,IACH,CAACA,CAAQ;AAAA,EAAA,GAIL,CAACM,GAAYC,CAAM,IAAIH,EAAc,MAAM,GAAG,GAC9C,CAACI,GAAOC,CAAO,IAAIH,EAAW,MAAM,GAAG;AAE7C,SACE,gBAAAI,EAAC,OAAA,EAAI,WAAU,8EAEb,UAAA;AAAA,IAAA,gBAAAd,EAAC,UAAM,UAAAS,EAAA,CAAc;AAAA,IAGrB,gBAAAK,EAAC,OAAA,EAAI,WAAU,2BAEb,UAAA;AAAA,MAAA,gBAAAd,EAAC,QAAA,EAAK,WAAU,gDAAA,CAAgD;AAAA,MAGhE,gBAAAc,EAAC,OAAA,EAAI,WAAU,mDACb,UAAA;AAAA,QAAA,gBAAAd,EAAC,UAAM,UAAAY,EAAA,CAAM;AAAA,QAGb,gBAAAZ;AAAA,UAAC;AAAA,UAAA;AAAA,YACC,WAAU;AAAA,YACV,OAAO;AAAA,cACL,eAAe;AAAA,cACf,mBAAmB;AAAA,cACnB,yBAAyB;AAAA,cACzB,yBAAyB;AAAA,YAAA;AAAA,YAE5B,UAAA;AAAA,UAAA;AAAA,QAAA;AAAA,QAID,gBAAAA,EAAC,UAAM,UAAAa,EAAA,CAAQ;AAAA,QACf,gBAAAb,EAAC,UAAK,UAAA,IAAA,CAAC;AAAA,QAEP,gBAAAA,EAAC,QAAA,EAAK,WAAU,kCACb,UAAAE,EAAQ,WAAW,SAAS,GAAG,GAAG,EAAA,CACrC;AAAA,QAEA,gBAAAF,EAAC,QAAA,EAAK,WAAU,+BAA+B,UAAAW,EAAA,CAAO;AAAA,MAAA,EAAA,CACxD;AAAA,IAAA,GACF;AAAA,sBAGC,SAAA,EACE,UAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAA,CAMH;AAAA,EAAA,GACF;AAEJ,GC7CMI,KAAwC,CAAC,EAAE,gBAAAC,QAAqB;AAClE,QAAM,CAACC,GAAWC,CAAY,IAAItB,EAAS,EAAK,GAC1C,CAACuB,GAASC,CAAU,IAAIxB,EAAwB,IAAI,GACpD,CAACyB,GAAUC,CAAW,IAAI1B,EAAoB,CAAA,CAAE,GAChD,CAAC2B,GAAkBC,CAAmB,IAAI5B,EAAS,EAAE,GACrD6B,IAAYC,EAAgC,IAAI,GAEhD,CAACC,GAAQC,CAAS,IAAIhC,EAAS,GAAG,GAClC,CAACiC,GAAMC,CAAO,IAAIlC,EAAS,EAAK,GAChC,CAACmC,GAAWC,CAAY,IAAIpC,EAAS,EAAK,GAE1C,CAACqC,GAAkBC,CAAmB,IACxCtC,EAA+B,IAAI,GAEjCuC,IAA8BT,EAAiC,IAAI,GACnEU,IAAqBV,EAAsB,IAAI,GAC/CW,IAAgBX,EAAsB,IAAI,GAE1CY,IAAWZ,EAAgC,IAAI,GAE/C,EAAE,YAAAxD,GAAY,UAAAJ,MAAaP,EAAoByD,CAAc;AAKnE,EAAAjB,EAAU,MAAM;AACZ,UAAMwC,IAAUC,EAAI1E,GAAU,kBAAkB;AAClC,WAAA2E,EAAQF,GAAS,CAACG,MAAa;AACzC,cAAQ,IAAI,gBAAgBA,EAAS,IAAA,CAAK;AAAA,IAC9C,CAAC,GAEM,MAAMC,EAAIJ,CAAO;AAAA,EAC5B,GAAG,CAACzE,CAAQ,CAAC;AAKb,QAAM8E,IAAsB,CAACC,MAA8B;AACvD,IAAArB,EAAoBvC,EAAoB4D,CAAU,CAAC,GACnDzB,EAAWyB,CAAU;AAAA,EACzB,GAKMC,IAAoB,OAAOC,MAA0B;AACvD,UAAMC,IAAQV,EAAS;AACvB,QAAI,CAACU,KAAS,EAACf,KAAA,QAAAA,EAAkB,aAAa;AAE9C,IAAAe,EAAM,MAAA,GAEFA,EAAM,QAAQf,EAAiB,gBAC/Be,EAAM,MAAMf,EAAiB,aAC7Be,EAAM,KAAA;AAGV,UAAMC,IAAY,MAAM;AACpB,MAAIhC,KACA+B,EACK,OACA,MAAM,CAACE,MAAQ,QAAQ,KAAK,sBAAsBA,CAAG,CAAC;AAAA,IAEnE;AAEA,QAAIH;AACA,UAAI;AACA,cAAMI,IAAUX,EAAItE,GAAY,aAAaiD,CAAO,EAAE,GAChDuB,IAAW,MAAMU,EAAID,CAAO;AAElC,QAAIT,EAAS,OAAA,KAAYzB,MACrB+B,EAAM,cAAcN,EAAS,IAAA,KAAS;AAAA,MAE9C,SAAS1D,GAAO;AACZ,gBAAQ,MAAM,qBAAqBA,CAAK;AAAA,MAC5C;AAAA;AAEA,MAAAgE,EAAM,cAAc;AAGxB,IAAAC,EAAA;AAAA,EACJ;AAKA,EAAAlD,EAAU,MAAM;AACZ,UAAMiD,IAAQV,EAAS;AACvB,IAAKU,MAEL/B,IACM+B,EAAM,KAAA,EAAO,MAAM,MAAM;AAAA,IAAE,CAAC,IAC5BA,EAAM,MAAA;AAAA,EAChB,GAAG,CAAC/B,CAAS,CAAC;AAKd,QAAMoC,IAAiB,CAACC,MAAwB;AAC5C,UAAMC,IAAWlC,EAAS,KAAK,CAACmC,MAASA,EAAK,SAASF,CAAW;AAClE,QAAI,CAACC,EAAU;AAEf,UAAME,IAAUjB;AAAA,MACZtE;AAAA,MACA,qBAAqBqF,EAAS,IAAI;AAAA,IAAA;AAGtC,IAAIpB,EAA4B,WAC5BQ,EAAIR,EAA4B,OAAO,GAE3CM,EAAQgB,GAAS,CAACf,MAAa;AAC3B,MAAIA,EAAS,WACTR,EAAoBQ,EAAS,KAAK,IAElCR,EAAoB;AAAA,QAChB,OAAO;AAAA,QACP,cAAc;AAAA,MAAA,CACjB;AAAA,IAET,CAAC,GAEDC,EAA4B,UAAUsB;AAAA,EAC1C,GAKMC,IAAe,YAAY;AAC7B,QAAI;AACA,MAAA1B,EAAa,EAAI;AACjB,YAAMjD,IAAW,MAAMF,GAAA;AACvB,MAAAmD,EAAa,EAAK,GAEd,MAAM,QAAQjD,KAAA,gBAAAA,EAAU,IAAI,KAC5BuC,EAAYvC,EAAS,IAAI;AAAA,IAEjC,SAASmE,GAAK;AACV,MAAAlB,EAAa,EAAK,GAClB,QAAQ,MAAM,4BAA4BkB,CAAG;AAAA,IACjD;AAAA,EACJ,GAKMS,IAAuB,MAAM;AAC/B,QAAI,CAACxC,KAAWE,EAAS,SAAS,GAAG;AACjC,YAAMuC,IAAQvC,EAAS,KAAK,CAACwC,MAAOA,EAAG,SAAS;AAChD,MAAID,MACApC,EAAoBvC,EAAoB2E,EAAM,IAAI,CAAC,GACnDxC,EAAWwC,EAAM,IAAI;AAAA,IAE7B;AAAA,EACJ;AAKA,SAAA7D,EAAU,MAAM;AACZ,IAAIoB,OAAwBA,CAAO;AAAA,EACvC,GAAG,CAACA,CAAO,CAAC,GAKZpB,EAAU,MAAM;AACZ,IAAA2D,EAAA;AAAA,EACJ,GAAG,CAAA,CAAE,GAEL3D,EAAU,OACFsB,EAAS,SAAS,KAAGsC,EAAA,GAElB,MAAM;AACT,IAAIxB,EAA4B,WAC5BQ,EAAIR,EAA4B,OAAO;AAE3C,UAAMa,IAAQV,EAAS;AACvB,IAAIU,OAAa,MAAA;AAAA,EACrB,IACD,CAAC3B,CAAQ,CAAC,GAKbtB,EAAU,MAAM;AACZ,QAAI,EAACkC,KAAA,QAAAA,EAAkB,aAAa;AAEpC,UAAM6B,IACF1B,EAAmB,YAAYjB;AAEnC,IAAA2B,EAAkBgB,CAAc,GAEhC1B,EAAmB,UAAUjB;AAAA,EACjC,GAAG,CAACc,CAAgB,CAAC,GAKrBlC,EAAU,MAAM;AACZ,IAAIuC,EAAS,YAASA,EAAS,QAAQ,SAASX;AAAA,EACpD,GAAG,CAACA,CAAM,CAAC,GACX5B,EAAU,MAAM;AACZ,IAAI0B,EAAU,WACVA,EAAU,QAAQ,MAAM,YAAY,UAAU,GAAGE,IAAS,GAAG,GAAG;AAAA,EAExE,GAAG,CAAA,CAAE,GAIL5B,EAAU,MAAM;AACZ,UAAMgE,IAAU,CAACC,MAA6B;AAC1C,UAAI/C,KAAaoB,EAAc,WAAWlB,GAAS;AAC/C,cAAM8C,IAAczB;AAAA,UAChBtE;AAAA,UACA,6BAA6BiD,CAAO,IAAIkB,EAAc,OAAO;AAAA,QAAA;AAEjE,QAAA6B,EAAOD,CAAW,EAAE,MAAM,MAAM;AAAA,QAAE,CAAC,GACnCD,EAAM,eAAA,GACNA,EAAM,cAAc;AAAA,MACxB;AAAA,IACJ;AAEA,kBAAO,iBAAiB,gBAAgBD,CAAO,GACxC,MAAM,OAAO,oBAAoB,gBAAgBA,CAAO;AAAA,EACnE,GAAG,CAAC9C,GAAWE,CAAO,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EA4InB,gBAAAL,EAAC,OAAA,EAAI,WAAU,uBAGX,UAAA;AAAA,IAAA,gBAAAd,EAAC,SAAI,WAAU,cACX,UAAA,gBAAAc,EAAC,MAAA,EAAG,WAAU,oBACV,UAAA;AAAA,MAAA,gBAAAd,EAACmE,IAAA,EAAM,WAAU,yBAAA,CAAyB;AAAA,MAAE;AAAA,IAAA,EAAA,CAEhD,EAAA,CACJ;AAAA,IAGA,gBAAAnE,EAAC,OAAA,EAAI,WAAU,mBACV,UAAA+B,IACG,gBAAA/B,EAAC,OAAA,EAAI,WAAU,WAAU,UAAA,uBAAA,CAAoB,IAE7C,gBAAAA,EAAC,OAAA,EAAI,OAAO,EAAE,SAAS,OAAA,GAClB,UAAA,CAAC,YAAY,SAAS,UAAU,SAAS,EAAE,IAAI,CAACoE,MAC7C,gBAAApE;AAAA,MAAC;AAAA,MAAA;AAAA,QAEG,SAAS,MAAM4C,EAAoBwB,CAAI;AAAA,QACvC,WAAW,mBAAmBjD,MAAYiD,IAAO,WAAW,EACxD;AAAA,QAEH,UAAAA,MAAS,aACJ,YACAA,EAAK,OAAO,CAAC,EAAE,YAAA,IAAgBA,EAAK,MAAM,CAAC;AAAA,MAAA;AAAA,MAP5CA;AAAA,IAAA,CASZ,GACL,EAAA,CAER;AAAA,IAGA,gBAAAtD,EAAC,MAAA,EAAG,WAAU,aACV,UAAA;AAAA,MAAA,gBAAAd,EAAC,OAAA,EAAI,KAAK3B,GAAA,CAAO;AAAA,MACjB,gBAAA2B,EAAC,QAAA,EAAM,WAAAiC,KAAA,gBAAAA,EAAkB,UAAS,cAAA,CAAc;AAAA,IAAA,GACpD;AAAA,IAGA,gBAAAnB,EAAC,OAAA,EAAI,WAAU,YAGX,UAAA;AAAA,MAAA,gBAAAA,EAAC,OAAA,EAAI,WAAU,aACX,UAAA;AAAA,QAAA,gBAAAd;AAAA,UAACZ;AAAA,UAAA;AAAA,YACG,KAAK6C,KAAA,gBAAAA,EAAkB;AAAA,UAAA;AAAA,QAAA;AAAA,QAE1BhB,KACG,gBAAAjB,EAAC,OAAA,EAAI,WAAU,iBACV,UAAA,CAAC,GAAG,GAAG,GAAG,CAAC,EAAE,IAAI,CAACqE,MACf,gBAAArE,EAAC,OAAA,EAAY,OAAO,EAAE,gBAAgB,GAAGqE,IAAI,IAAI,IAAA,KAAvCA,CAA8C,CAC3D,EAAA,CACL;AAAA,MAAA,GAER;AAAA,MAGA,gBAAAvD,EAAC,OAAA,EAAI,WAAU,eACX,UAAA;AAAA,QAAA,gBAAAA,EAAC,KAAA,EAAE,WAAU,YAAW,UAAA;AAAA,UAAA;AAAA,WACTmB,KAAA,gBAAAA,EAAkB,aAAY;AAAA,QAAA,GAC7C;AAAA,QACA,gBAAAnB,EAAC,KAAA,EAAE,WAAU,YAAW,UAAA;AAAA,UAAA;AAAA,WACfmB,KAAA,gBAAAA,EAAkB,aAAY;AAAA,QAAA,GACvC;AAAA,QAEA,gBAAAnB,EAAC,OAAA,EAAI,WAAU,gBACV,UAAA;AAAA,UAAAG,IACG,gBAAAjB,EAAC,UAAA,EAAO,SAAS,MAAMkB,EAAa,EAAK,GAAG,WAAU,iBAClD,UAAA,gBAAAlB,EAAC,OAAA,EAAI,KAAK1B,IAAO,EAAA,CACrB,IAEA,gBAAA0B,EAAC,UAAA,EAAO,SAAS,MAAMkB,EAAa,EAAI,GAAG,WAAU,gBACjD,UAAA,gBAAAlB,EAAC,OAAA,EAAI,KAAKzB,GAAA,CAAM,GACpB;AAAA,UAGJ,gBAAAyB;AAAA,YAAC;AAAA,YAAA;AAAA,cACG,SAAS,MAAM8B,EAAQ,CAACD,CAAI;AAAA,cAC5B,WAAU;AAAA,cAEV,UAAA,gBAAA7B,EAAC,OAAA,EAAI,KAAK6B,IAAOpD,KAAUD,GAAA,CAAS;AAAA,YAAA;AAAA,UAAA;AAAA,UAGxC,gBAAAwB;AAAA,YAAC;AAAA,YAAA;AAAA,cACG,KAAKyB;AAAA,cACL,MAAK;AAAA,cACL,KAAK;AAAA,cACL,KAAK;AAAA,cACL,MAAM;AAAA,cACN,OAAOE;AAAA,cACP,UAAU,CAAC,MAAM;AACb,sBAAM2C,IAAI,WAAW,EAAE,OAAO,KAAK;AACnC,gBAAA1C,EAAU0C,CAAC,GACX,EAAE,OAAO,MAAM,YAAY,UAAU,GAAGA,IAAI,GAAG,GAAG;AAAA,cACtD;AAAA,cACA,WAAU;AAAA,YAAA;AAAA,UAAA;AAAA,QACd,GACJ;AAAA,0BAECrE,IAAA,CAAA,CAAU;AAAA,MAAA,EAAA,CACf;AAAA,IAAA,GACJ;AAAA,IAEA,gBAAAD,EAAC,WAAM,KAAKsC,GAAU,OAAOT,GAAM,SAAQ,QAAO,MAAI,GAAA,CAAC;AAAA,EAAA,EAAA,CAC3D;AAER;"}